-- CRIACAO DA TABELA PRODUTO
-- PARA USO NOS PROGRAMAS
--    GPAZNN18 - CARGA DA TABELA A PARTIR DE ARQUIVO VSAM-KSDS
--    GPAZNN19 - MANUTENCAO DA TABELA A PARTIR DE MOVIMENTO
--    GPAZNN20 - RELATORIO DE REPOSICAO DE PRODUTOS
--    GPAZNN21 - ATUALIZACAO E EXCLUSAO POSICIONADA VIA CURSOR
CREATE TABLE PRODUTO
( CODPROD            CHAR(4) UNIQUE NOT NULL,
  DESCPROD           VARCHAR(20)    NOT NULL,
  UNIDPROD           CHAR(5)        NOT NULL,
  LOCALPROD          CHAR(5)        NOT NULL,
  QTDEST             DECIMAL(5,0)
                     CHECK (QTDEST >= 0),
  QTDMAX             DECIMAL(5,0)
                     CHECK (QTDMAX < 10000 AND QTDMAX > QTDMIN),
  QTDMIN             DECIMAL(5,0)
                     CHECK (QTDMIN > 0 AND QTDMIN < QTDMAX),
  PRECOCOMPRA        DECIMAL(8,2)
                     CHECK (PRECOCOMPRA > 0),
  PRECOVENDA         DECIMAL(8,2)
                     CHECK (PRECOVENDA >= PRECOCOMPRA),
  PERCOMIS           DECIMAL(4,2)
                     CHECK (PERCOMIS > 0));

-- CRIACAO DO INDICE DA TABELA PRODUTO

CREATE UNIQUE INDEX IDXPRODUTO
ON PRODUTO (CODPROD);

-- CRIACAO DA CHAVE PRIMARIA DA

ALTER TABLE PRODUTO ADD PRIMARY KEY(CODPROD)
